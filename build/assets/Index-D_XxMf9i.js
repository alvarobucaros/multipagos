import{r as n,j as e,V as E,a as M,U as T}from"./app-A7ljvJTY.js";import{A}from"./AuthenticatedLayout-B9cDBbhi.js";import{M as I,d as g}from"./MiInput-Dp0wNRiD.js";import{M as L}from"./Modal-DrVjYP2K.js";import{P as O,S as k}from"./Pagination-D6Rg0Xny.js";import{M as D}from"./MiLista-BBf1O-UI.js";import"./Dropdown-BGjqRuPn.js";import"./transition-qh1Rck6d.js";function P({Id:o,Label:c,data:d,listas:a=[],OnChange:p,required:t}){return n.useState(d||""),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[c," "]}),e.jsxs("select",{id:o,name:o,value:d,onChange:p,required:t,className:"w-full px-1 py-1 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100 'border-gray-300'}",children:[e.jsx("option",{value:"",children:"Selecione una opción"}),a.map(l=>e.jsx("option",{value:l.id,children:l.opcion},l.id))]})]})}function R({Id:o,Rows:c,Cols:d,Label:a,className:p,data:t,required:l,OnChange:m}){return n.useState(t||""),e.jsxs("div",{className:p,children:[e.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[a," "]}),e.jsx("textarea",{id:o,name:o,rows:c,cols:d,value:t,className:"w-full px-1 py-1 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100 border-gray-300",required:l,onChange:m})]})}function Z(o){const c=E().props.auth.user,[d,a]=n.useState(!1),[p,t]=n.useState(""),[l,m]=n.useState(1),{data:i,setData:x,delete:q,post:U,put:G,processing:f,reset:z,errors:B}=M({id:"",pos_grupo_id:"",pos_titulo:"",pos_descripcion:"",pos_imagen:"",pos_estado:"A"}),[y,F]=n.useState(o.grupos),[N,$]=n.useState(c.role),b=s=>{a(!0),m(s),s===1?(t("Añadir post"),x({pos_grupo_id:"",pos_titulo:"",pos_descripcion:"",pos_imagen:"postcolor",pos_estado:"A"})):t("Modificar post")},_=()=>{a(!1)},v=[{value:"",label:"-- Selecciona un estado --"},{value:"Actual",label:"Actulidad"},{value:"Info",label:"Informativo"},{value:"Espec",label:"Especial"}],w=s=>{if(s.preventDefault(),l===1)try{const r=g.Inertia.post("/post",i);alert("Datos actualizados exitosamente"),console.log("Respuesta:",r)}catch(r){console.error("Error al crear el post:",r)}else{try{const r=g.Inertia.put(`/post/${i.id}`,i);alert("Datos actualizados exitosamente"),console.log("Respuesta:",r)}catch(r){console.error("Error al actualizar el post:",r)}a(!1)}},S=(s,r)=>{k.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar el post "+s+" "+r,text:"Se perderá el post",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(h=>{h.isConfirmed&&g.Inertia.delete(`/post/${s}`,{onSuccess:()=>{alert("post eliminado exitosamente.")},onError:C=>{console.error("Error al eliminar el post:",C)}})})};function u(s){const{name:r,value:j}=s.target;x(h=>({...h,[r]:j}))}return e.jsx(A,{auth:o.auth,errors:o.errors,children:e.jsxs("div",{className:"p-6",children:[N!=="User"&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded mb-4",onClick:()=>b(1),children:" Crear Post"})}),e.jsx(T,{href:"/mimenu",className:"bg-green-500 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("span",{className:"bg-blue-100",children:" POSTS "}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"GRUPO"}),e.jsx("th",{className:"px-2 py-1",children:"TITULO"}),e.jsx("th",{className:"px-2 py-1",children:"DETALLE"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),e.jsx("th",{className:"px-2 py-1",colSpan:2})]})}),e.jsx("tbody",{children:o.posts.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.id}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.grp_titulo}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_titulo}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_descripcion}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_estado}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>{x(s),b(0)},children:"Editar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>S(s.id,s.grp_titulo+" - "+s.pos_titulo),children:"Eliminar"})})]},s.id))})]}),e.jsx(O,{class:"mt-6",links:o.posts.links})]}),e.jsxs(L,{show:d,onClose:_,children:[e.jsx("h2",{className:"p-3 text-lg font-medium text-gray-900",children:p}),e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 ease-in-out scale-100",children:e.jsx("form",{onSubmit:w,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(P,{Id:"pos_grupo_id",Label:"Grupo",data:i.pos_grupo_id,listas:y,OnChange:u,required:!0}),e.jsx(I,{Id:"pos_titulo",Type:"text",Label:"Titulo Post",onChange:u,classNameI:"md:col-span-2",maxLength:"50",data:i.pos_titulo,required:!0,OnChange:u}),e.jsx(R,{Id:"pos_descripcion",Rows:"2",Cols:"120",Label:"Detalles",classNameI:"md:col-span-2",data:i.pos_descripcion,required:!0,OnChange:u}),e.jsx("br",{}),e.jsx(D,{Id:"pos_estado",Label:"Estado",classNameI:"md:col-span-2",data:i.pos_estado,options:v,OnChange:u,required:!0}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"mx-4 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>a(!1),children:"Cancelar"}),e.jsx("button",{processing:f,className:"mx-4 bg-blue-500 hover:bg-blue-700 text-white font-bold mx-3 py-1 px-1 rounded",children:"Guardar"})]})]})})})]})]})})}export{Z as default};
